<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>最终抉择 - 陈默创作实验室</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/ending.css">
</head>
<body>
    <div class="container">
        <div class="ending-container">
            <!-- 进度检查 -->
            <div class="progress-check" id="progressCheck">
                <h2>🔍 真相探索进度</h2>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="progressText">正在检测你的发现...</p>
                
                <div class="requirement-list">
                    <div class="requirement" data-requirement="clues">
                        <span class="req-icon">🔍</span>
                        <span class="req-text">关键线索收集</span>
                        <span class="req-status" id="cluesStatus">❌</span>
                    </div>
                    <div class="requirement" data-requirement="understanding">
                        <span class="req-icon">💭</span>
                        <span class="req-text">真相理解程度</span>
                        <span class="req-status" id="understandingStatus">❌</span>
                    </div>
                    <div class="requirement" data-requirement="cycles">
                        <span class="req-icon">🔄</span>
                        <span class="req-text">时间循环认知</span>
                        <span class="req-status" id="cyclesStatus">❌</span>
                    </div>
                </div>
            </div>

            <!-- 最终真相揭示 -->
            <div class="truth-reveal" id="truthReveal" style="display: none;">
                <h1>最终真相</h1>
                
                <div class="truth-content">
                    <p>亲爱的读者，</p>
                    
                    <p>如果你能看到这段话，说明你已经发现了所有的线索，理解了整个故事的真相。</p>
                    
                    <div class="final-revelation">
                        <h3>🎭 真相揭示</h3>
                        <p><strong>陈默不是一个真实存在的作家。</strong></p>
                        <p>他是我的创造，是我——这个游戏的开发者——的分身。</p>
                        <p>《完美犯罪》不是一个关于犯罪的故事，而是一个关于创作困境的隐喻。</p>
                        
                        <blockquote class="meta-revelation">
                            "每个创作者都是时间囚徒，被困在自己对完美的追求中，在第47次修改时达到临界点。"
                        </blockquote>
                        
                        <p>你现在面临的选择，不仅决定了陈默的命运，也反映了你对创作、完美和艺术的理解。</p>
                    </div>
                </div>

                <!-- 结局选择 -->
                <div class="ending-choices">
                    <h3>做出你的选择</h3>
                    
                    <div class="choice-grid">
                        <div class="choice-card" data-ending="redemption">
                            <h4>🎨 艺术救赎</h4>
                            <p>选择让陈默放下对完美的执念，接受作品的不完美，在现实中继续创作。</p>
                            <button class="choice-btn" onclick="selectEnding('redemption')">选择此结局</button>
                        </div>
                        
                        <div class="choice-card" data-ending="condemnation">
                            <h4>⚖️ 法律制裁</h4>
                            <p>选择让陈默为自己的行为承担后果，即使这意味着艺术的终结。</p>
                            <button class="choice-btn" onclick="selectEnding('condemnation')">选择此结局</button>
                        </div>
                        
                        <div class="choice-card" data-ending="mystery">
                            <h4>🌫️ 永恒悬置</h4>
                            <p>选择让真相永远成谜，让陈默在时间的迷雾中继续他的追寻。</p>
                            <button class="choice-btn" onclick="selectEnding('mystery')">选择此结局</button>
                        </div>
                        
                        <div class="choice-card" data-ending="meta">
                            <h4>🔮 元叙事觉醒</h4>
                            <p>选择打破第四面墙，让陈默意识到自己只是故事中的角色。</p>
                            <button class="choice-btn" onclick="selectEnding('meta')">选择此结局</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 未满足条件提示 -->
            <div class="access-denied" id="accessDenied" style="display: none;">
                <h2>🚫 访问受限</h2>
                <p>你还没有发现所有的真相。请继续探索：</p>
                <ul id="missingRequirements"></ul>
                <a href="../detective/clue-tracker.html" class="back-btn">查看线索追踪</a>
            </div>
        </div>
    </div>

    <script src="../js/ending-system.js"></script>
</body>
</html>